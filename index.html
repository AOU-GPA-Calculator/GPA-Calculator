<!DOCTYPE html>
<html lang="en" dir="ltr" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>AOU GPA Calculator</title>
  <meta name="description" content="AOU GPA Calculator â€“ Calculate semester GPA and estimate cumulative GPA on a 4.0 scale." />
  <meta name="author" content="Homam Shaaban" />
  <meta name="robots" content="index, follow" />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;500;700;800;900&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg1:#061b2c;
      --bg2:#0a2b45;

      --card1: rgba(255,255,255,.08);
      --card2: rgba(255,255,255,.06);
      --border: rgba(255,255,255,.14);

      --text:#eaf2ff;
      --muted: rgba(234,242,255,.72);

      --gold:#f6b100;
      --gold2:#ffbf2f;

      --shadow: 0 16px 44px rgba(0,0,0,.32);
      --radius: 20px;

      --input: rgba(255,255,255,.10);
      --inputBorder: rgba(255,255,255,.16);

      --danger:#ff5b5b;
      --ok:#4ee29a;

      --btnBg: rgba(255,255,255,.06);
      --focus: rgba(246,177,0,.26);

      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;

      --toastBorder: rgba(78,226,154,.40);
      --toastBg: rgba(6,27,44,.86);
      --toastText: rgba(210,255,235,.95);
    }

    html[data-theme="light"]{
      --bg1:#f6f8ff;
      --bg2:#eef2ff;

      --card1: rgba(0,0,0,.03);
      --card2: rgba(0,0,0,.02);
      --border: rgba(0,0,0,.10);

      --text:#0b1220;
      --muted: rgba(11,18,32,.65);

      --shadow: 0 14px 40px rgba(10,25,45,.10);

      --input: rgba(0,0,0,.03);
      --inputBorder: rgba(0,0,0,.12);

      --btnBg: rgba(255,255,255,.75);
      --focus: rgba(246,177,0,.22);

      --toastBorder: rgba(16,185,129,.35);
      --toastBg: rgba(255,255,255,.92);
      --toastText: rgba(11,18,32,.92);
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      min-height:100vh;
      font-family:"Cairo", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text);
      background:
        radial-gradient(900px 420px at 20% 10%, rgba(246,177,0,.13), transparent 60%),
        radial-gradient(900px 420px at 80% 20%, rgba(78,226,154,.10), transparent 55%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
    }

    .wrap{
      max-width: 1060px;
      margin: 26px auto 60px;
      padding: 0 16px;
    }

    .toast{
      position: fixed;
      top: 14px;
      left: 14px;
      right: 14px;
      margin: 0 auto;
      max-width: 680px;
      display:none;
      z-index: 999;
      border-radius: 16px;
      padding: 12px 14px;
      border: 1px solid var(--toastBorder);
      background: var(--toastBg);
      backdrop-filter: blur(10px);
      box-shadow: var(--shadow);
      color: var(--toastText);
      font-weight: 900;
      text-align: center;
    }

    /* ===== Topbar ===== */
    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:14px;
      flex-wrap: wrap;
      margin-bottom: 14px;
    }

    .brand{
      display:flex;
      align-items:center;
      gap:14px;
      min-width: 260px;
    }
    .logo{
      width: 84px;
      height: 52px;
      object-fit: contain;
      border-radius: 12px;
      background: rgba(255,255,255,.90);
      padding: 6px;
      border: 1px solid rgba(0,0,0,.08);
    }
    html[data-theme="dark"] .logo{
      background: rgba(255,255,255,.92);
    }

    .titleBlock h1{
      margin:0;
      font-size: 28px;
      line-height: 1.15;
      font-weight: 900;
    }
    .titleBlock p{
      margin:6px 0 0;
      color: var(--muted);
      font-size: 13px;
      line-height: 1.5;
      font-weight: 500;
    }

    .topActions{
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap: wrap;
      justify-content: flex-end;
    }

    .chip{
      display:inline-flex;
      gap:8px;
      align-items:center;
      padding: 9px 12px;
      border-radius: 999px;
      border:1px solid var(--border);
      background: var(--btnBg);
      backdrop-filter: blur(8px);
      color: var(--muted);
      font-size: 13px;
      white-space: nowrap;
      font-weight: 700;
    }

    .btn{
      border: 1px solid var(--border);
      background: var(--btnBg);
      color: var(--text);
      padding: 10px 14px;
      border-radius: 999px;
      cursor:pointer;
      transition: .14s ease;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      user-select:none;
      font-weight: 900;
    }
    .btn:hover{ transform: translateY(-1px); }
    .btn:active{ transform: translateY(0px); }

    .btn.gold{
      background: linear-gradient(180deg, var(--gold2), var(--gold));
      border-color: rgba(0,0,0,.18);
      color: #1b1400;
      box-shadow: 0 10px 26px rgba(246,177,0,.25);
    }

    .notice{
      margin-top: 12px;
      border-radius: 999px;
      padding: 12px 16px;
      border:1px solid var(--border);
      background: var(--btnBg);
      color: var(--muted);
      backdrop-filter: blur(8px);
      text-align:center;
      font-size: 13px;
      line-height: 1.55;
      font-weight: 700;
    }

    /* ===== Main Tabs (Calculator / Info) ===== */
    .mainTabs{
      margin-top: 14px;
      display:flex;
      justify-content:center;
      gap: 12px;
      flex-wrap: wrap;
    }
    .tab{
      min-width: 220px;
      padding: 12px 16px;
      border-radius: 999px;
      border:1px solid var(--border);
      background: var(--btnBg);
      color: var(--text);
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      user-select:none;
      font-weight: 900;
    }
    .tab.active{
      background: rgba(246,177,0,.16);
      border-color: rgba(246,177,0,.40);
      box-shadow: 0 12px 30px rgba(246,177,0,.12);
    }

    /* ===== Panels ===== */
    .panel{
      margin-top: 16px;
      border-radius: var(--radius);
      border: 1px solid var(--border);
      background: linear-gradient(180deg, var(--card1), var(--card2));
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    html[data-theme="light"] .panel{
      background: linear-gradient(180deg, rgba(255,255,255,.88), rgba(255,255,255,.78));
    }

    .panelHeader{
      padding: 18px 18px 0;
      text-align:center;
    }
    .panelHeader h2{
      margin: 0;
      font-size: 28px;
      letter-spacing: .2px;
      font-weight: 900;
    }
    .panelHeader p{
      margin: 8px 0 0;
      color: var(--muted);
      font-size: 14px;
      line-height: 1.6;
      padding: 0 10px 10px;
      font-weight: 600;
    }

    .content{ padding: 18px; }

    .grid2{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }
    @media (max-width: 860px){
      .grid2{ grid-template-columns: 1fr; }
      .panelHeader h2{ font-size: 24px; }
      .titleBlock h1{ font-size: 26px; }
      .brand{ min-width: unset; }
      .logo{ width: 78px; height: 48px; }
    }

    .field{
      display:flex;
      flex-direction:column;
      gap: 6px;
    }
    .label{
      font-size: 12px;
      color: rgba(234,242,255,.86);
      font-weight: 900;
    }
    html[data-theme="light"] .label{ color: rgba(11,18,32,.78); }

    input, select, textarea{
      width:100%;
      border-radius: 14px;
      border: 1px solid var(--inputBorder);
      background: var(--input);
      color: var(--text);
      padding: 12px 12px;
      outline:none;
      font-size: 14px;
      font-weight: 700;
    }
    input::placeholder{ color: rgba(234,242,255,.55); font-weight: 600; }
    html[data-theme="light"] input::placeholder{ color: rgba(11,18,32,.45); }

    input:focus, select:focus, textarea:focus{
      box-shadow: 0 0 0 4px var(--focus);
      border-color: rgba(246,177,0,.55);
    }

    .ruleBox{
      margin: 14px 0 0;
      border-radius: 16px;
      border: 1px solid var(--border);
      background: rgba(255,255,255,.06);
      padding: 12px 14px;
      color: var(--muted);
      font-size: 13px;
      line-height: 1.6;
      text-align: center;
      font-weight: 700;
    }
    html[data-theme="light"] .ruleBox{ background: rgba(255,255,255,.70); }

    /* ===== Course table rows ===== */
    .table{
      margin-top: 14px;
      border-radius: 16px;
      border: 1px solid var(--border);
      overflow:hidden;
      background: rgba(0,0,0,.10);
    }
    html[data-theme="light"] .table{ background: rgba(255,255,255,.55); }

    .thead, .trow{
      display:grid;
      grid-template-columns: 110px 120px 140px 140px 1fr 120px;
      gap: 10px;
      align-items:center;
      padding: 12px 12px;
    }
    .thead{
      background: rgba(255,255,255,.06);
      color: rgba(234,242,255,.82);
      font-size: 12px;
      font-weight: 900;
    }
    html[data-theme="light"] .thead{
      background: rgba(0,0,0,.03);
      color: rgba(11,18,32,.78);
    }
    .trow{
      border-top: 1px solid rgba(255,255,255,.08);
      font-weight: 700;
    }
    html[data-theme="light"] .trow{
      border-top: 1px solid rgba(0,0,0,.06);
    }

    @media (max-width: 980px){
      .thead, .trow{ grid-template-columns: 110px 120px 140px 1fr; }
      .hide-md{ display:none; }
    }
    @media (max-width: 620px){
      .thead, .trow{ grid-template-columns: 110px 1fr; }
      .hide-sm{ display:none; }
    }

    .cell{ min-width:0; }
    .codeInput{ font-family: var(--mono); letter-spacing: .2px; }

    .badge{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      padding: 7px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color: rgba(234,242,255,.92);
      font-size: 12px;
      gap: 6px;
      white-space: nowrap;
      font-weight: 900;
    }
    html[data-theme="light"] .badge{
      border-color: rgba(0,0,0,.10);
      background: rgba(255,255,255,.65);
      color: rgba(11,18,32,.88);
    }
    .badge.ok{ border-color: rgba(78,226,154,.35); background: rgba(78,226,154,.12); }
    .badge.warn{ border-color: rgba(246,177,0,.35); background: rgba(246,177,0,.12); }

    .mini{
      font-size: 12px;
      color: var(--muted);
      line-height: 1.35;
      font-weight: 700;
    }

    .actions{
      display:flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-top: 14px;
      align-items:center;
      justify-content: space-between;
    }
    .actionsLeft, .actionsRight{
      display:flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items:center;
    }

    .bigResult{
      margin-top: 18px;
      text-align:center;
      padding: 18px 16px 10px;
    }
    .bigNumber{
      font-size: 52px;
      letter-spacing: .6px;
      margin: 4px 0 0;
      font-weight: 900;
    }
    .bigCaption{
      margin: 6px 0 0;
      color: var(--muted);
      font-size: 13px;
      line-height: 1.6;
      font-weight: 700;
    }

    /* ===== Info page (like screenshot) ===== */
    .infoTopTabs{
      display:flex;
      gap:8px;
      justify-content:flex-start;
      margin: 4px 0 10px;
      flex-wrap: wrap;
    }
    .pill{
      padding: 8px 12px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: var(--btnBg);
      cursor:pointer;
      font-weight: 900;
      color: var(--text);
      display:inline-flex;
      align-items:center;
      gap:8px;
    }
    .pill.active{
      background: rgba(59,130,246,.18);
      border-color: rgba(59,130,246,.45);
    }

    .sectionTitle{
      display:flex;
      align-items:center;
      gap:8px;
      font-weight: 900;
      margin: 14px 0 8px;
      color: var(--text);
    }
    .divider{
      height:1px;
      background: rgba(255,255,255,.12);
      border:0;
      margin: 8px 0 10px;
    }
    html[data-theme="light"] .divider{ background: rgba(0,0,0,.10); }

    .infoCard{
      border:1px solid rgba(255,255,255,.12);
      border-radius: 16px;
      background: rgba(0,0,0,.10);
      padding: 12px 12px;
    }
    html[data-theme="light"] .infoCard{
      background: rgba(255,255,255,.55);
      border-color: rgba(0,0,0,.10);
    }

    /* accordion */
    details{
      border: 1px solid rgba(255,255,255,.12);
      border-radius: 14px;
      background: rgba(255,255,255,.06);
      padding: 10px 12px;
      margin-top: 10px;
    }
    html[data-theme="light"] details{
      border-color: rgba(0,0,0,.10);
      background: rgba(255,255,255,.65);
    }
    summary{
      cursor:pointer;
      font-weight: 900;
      color: var(--text);
      list-style: none;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }
    summary::-webkit-details-marker{ display:none; }
    .faqBody{
      margin-top: 10px;
      color: var(--muted);
      font-weight: 700;
      line-height: 1.65;
      font-size: 13px;
    }

    /* footer */
    .siteFooter{
      margin-top: 18px;
      text-align:center;
      color: var(--muted);
      font-size: 12px;
      line-height: 1.6;
      padding: 18px 12px 0;
      font-weight: 700;
    }
    .siteFooter a{
      color: var(--muted);
      text-decoration: underline;
      text-underline-offset: 3px;
    }

    @media print{
      body{ background:#fff; color:#111; }
      .topbar, .mainTabs, .notice, .actions, .siteFooter { display:none !important; }
      .panel{ box-shadow:none; border:1px solid #ddd; background:#fff; }
      .table{ border:1px solid #ddd; background:#fff; }
      .thead{ background:#f3f4f6; color:#111; }
      input, select { border:1px solid #ddd; background:#fff; color:#111; }
      .bigNumber{ color:#111; }
      .bigCaption, .mini{ color:#333; }
    }
  </style>
</head>

<body>
  <div class="toast" id="toast"></div>

  <div class="wrap" id="top">
    <div class="topbar">
      <div class="brand">
        <img class="logo" src="./aou-logo.png" alt="Arab Open University Logo" onerror="this.style.display='none'">
        <div class="titleBlock">
          <h1 data-i18n="appTitle">AOU GPA Calculator</h1>
          <p data-i18n="appSub">Calculate semester GPA and estimate cumulative GPA on a 4.0 scale (AOU policy)</p>
        </div>
      </div>

      <div class="topActions">
        <span class="chip" id="scaleChip" data-i18n="scaleChip">Scale: 4.0</span>
        <button class="btn" id="btnCopyLink" type="button" data-i18n="copyLink">Copy link</button>
        <button class="btn" id="btnTheme" type="button" title="Theme">ğŸŒ™</button>
        <button class="btn" id="btnAR" type="button">AR</button>
        <button class="btn" id="btnEN" type="button">EN</button>
      </div>
    </div>

    <div class="notice" data-i18n="notice">
      Notice: This is a student guidance tool and not an official university system.
    </div>

    <div class="mainTabs">
      <button class="tab active" id="tabCalc" type="button"><span>ğŸ§®</span><span data-i18n="tabCalc">Calculator</span></button>
      <button class="tab" id="tabInfo" type="button"><span>â„¹ï¸</span><span data-i18n="tabInfo">Information</span></button>
    </div>

    <!-- ===== Calculator Panel ===== -->
    <section class="panel" id="panelCalc">
      <div class="panelHeader">
        <h2 data-i18n="calcTitle">GPA Calculator</h2>
        <p data-i18n="calcDesc">Enter grades (0â€“100) and credit hours. Previous GPA/hours are optional to estimate cumulative GPA.</p>
      </div>

      <div class="content">
        <div class="grid2">
          <div class="field">
            <div class="label" data-i18n="prevGpa">Previous cumulative GPA (0â€“4) (optional)</div>
            <input id="prevGpa" type="number" step="0.01" min="0" max="4" placeholder="e.g., 2.82">
          </div>
          <div class="field">
            <div class="label" data-i18n="prevHours">Total completed credit hours (optional)</div>
            <input id="prevHours" type="number" step="1" min="0" placeholder="e.g., 103">
          </div>
        </div>

        <div class="ruleBox" data-i18n="rule">
          Retake Rule: If you enter the same Course Code multiple times, only the latest attempt is counted (previous attempts become Replaced).
        </div>

        <div class="table">
          <div class="thead">
            <div class="cell" data-i18n="colAction">Action</div>
            <div class="cell hide-sm" data-i18n="colStatus">Status</div>
            <div class="cell hide-md" data-i18n="colPoints">GPA Points</div>
            <div class="cell hide-md" data-i18n="colHours">Credit Hours</div>
            <div class="cell" data-i18n="colScore">Grade (0â€“100)</div>
            <div class="cell" data-i18n="colCode">Course Code</div>
          </div>
          <div id="rows"></div>
        </div>

        <div class="actions">
          <div class="actionsLeft">
            <button class="btn" id="btnExport" type="button" data-i18n="exportJson">Export (JSON)</button>
            <button class="btn" id="btnImport" type="button" data-i18n="importJson">Import (JSON)</button>
            <input id="importFile" type="file" accept="application/json" style="display:none">
            <button class="btn" id="btnReset" type="button" data-i18n="reset">Reset</button>
          </div>
          <div class="actionsRight">
            <button class="btn gold" id="btnCalc" type="button" data-i18n="calculate">Calculate</button>
            <button class="btn gold" id="btnAdd" type="button" data-i18n="addCourse">Add Course</button>
            <button class="btn" id="btnPrint" type="button" data-i18n="print">Print</button>
          </div>
        </div>

        <div class="bigResult">
          <div class="bigNumber" id="semGpa">0.00</div>
          <div class="bigCaption" id="semCaption" data-i18n="semCaption">Semester GPA (for entered courses).</div>

          <div style="height:10px"></div>

          <div class="bigNumber" id="cumGpa">0.00</div>
          <div class="bigCaption" id="cumCaption" data-i18n="cumCaption">Estimated cumulative GPA (if you entered previous GPA & hours).</div>
        </div>

        <p class="mini" style="margin-top:10px" data-i18n="tipDecimal">
          Tip: You can enter decimals (e.g., 88.5). Letter & points are calculated automatically using AOU scale.
        </p>
      </div>
    </section>

    <!-- ===== Info Panel ===== -->
    <section class="panel" id="panelInfo" style="display:none">
      <div class="panelHeader" style="text-align:left">
        <div class="infoTopTabs">
          <button class="pill" id="infoEN" type="button">English</button>
          <button class="pill" id="infoAR" type="button">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</button>
        </div>
        <h2 id="infoTitle">GPA Calculator Information</h2>
      </div>

      <div class="content">
        <!-- About -->
        <div class="sectionTitle">â„¹ï¸ <span id="aboutTitle">About This Calculator</span></div>
        <hr class="divider">
        <div class="infoCard">
          <div class="mini" id="aboutText">
            This GPA calculator is designed for Arab Open University (AOU) students. It helps you calculate your semester GPA and estimate your cumulative GPA using the standard 4.0 scale based on AOUâ€™s grading policy.
          </div>
        </div>

        <!-- Grading Scale -->
        <div class="sectionTitle">ğŸ“ <span id="scaleTitle">Grading Scale</span></div>
        <hr class="divider">
        <div class="table" style="margin-top:0">
          <div class="thead" style="grid-template-columns: 1fr 1fr 1fr;">
            <div class="cell" id="gsCol1">Letter Grade</div>
            <div class="cell" id="gsCol2">Grade Points</div>
            <div class="cell" id="gsCol3">Percentage</div>
          </div>
          <div class="trow" style="grid-template-columns: 1fr 1fr 1fr;">
            <div class="cell">A</div><div class="cell">4.0</div><div class="cell">90â€“100%</div>
          </div>
          <div class="trow" style="grid-template-columns: 1fr 1fr 1fr;">
            <div class="cell">B+</div><div class="cell">3.5</div><div class="cell">82â€“89%</div>
          </div>
          <div class="trow" style="grid-template-columns: 1fr 1fr 1fr;">
            <div class="cell">B</div><div class="cell">3.0</div><div class="cell">74â€“81%</div>
          </div>
          <div class="trow" style="grid-template-columns: 1fr 1fr 1fr;">
            <div class="cell">C+</div><div class="cell">2.5</div><div class="cell">66â€“73%</div>
          </div>
          <div class="trow" style="grid-template-columns: 1fr 1fr 1fr;">
            <div class="cell">C</div><div class="cell">2.0</div><div class="cell">58â€“65%</div>
          </div>
          <div class="trow" style="grid-template-columns: 1fr 1fr 1fr;">
            <div class="cell">D</div><div class="cell">1.0</div><div class="cell">50â€“57%</div>
          </div>
          <div class="trow" style="grid-template-columns: 1fr 1fr 1fr;">
            <div class="cell">F</div><div class="cell">0.0</div><div class="cell">Below 50%</div>
          </div>
        </div>

        <!-- FAQ -->
        <div class="sectionTitle">â“ <span id="faqTitle">Frequently Asked Questions</span></div>
        <hr class="divider">

        <details open>
          <summary><span id="q1">How do I use this calculator?</span><span>â–¾</span></summary>
          <div class="faqBody" id="a1">
            1) (Optional) Enter your previous cumulative GPA and total completed hours.<br>
            2) Add your current semester courses.<br>
            3) Enter Course Code, Grade (0â€“100), and Credit Hours.<br>
            4) Click â€œCalculateâ€ to see semester GPA and estimated cumulative GPA.
          </div>
        </details>

        <details>
          <summary><span id="q2">What if I donâ€™t have a previous GPA?</span><span>â–¾</span></summary>
          <div class="faqBody" id="a2">
            Leave previous GPA and hours empty (or 0). The calculator will still compute your semester GPA.
          </div>
        </details>

        <details>
          <summary><span id="q3">Can I calculate for multiple semesters?</span><span>â–¾</span></summary>
          <div class="faqBody" id="a3">
            Yes. Enter your latest cumulative GPA and total completed hours from all previous semesters, then add your new semester courses to estimate the updated cumulative GPA.
          </div>
        </details>

        <details>
          <summary><span id="q4">Is my data saved or shared?</span><span>â–¾</span></summary>
          <div class="faqBody" id="a4">
            All calculations run locally in your browser. The app can optionally save your last inputs using localStorage on your device only.
          </div>
        </details>

        <details>
          <summary><span id="q5">What is the difference between Semester GPA and Cumulative GPA?</span><span>â–¾</span></summary>
          <div class="faqBody" id="a5">
            Semester GPA is calculated from the courses you entered (current term). Cumulative GPA estimates your overall GPA when combining previous GPA/hours with this termâ€™s results.
          </div>
        </details>

        <!-- Tips -->
        <div class="sectionTitle">ğŸ’¡ <span id="tipsTitle">Tips for Success</span></div>
        <hr class="divider">
        <div class="infoCard">
          <div class="mini" id="tipsBody">
            â€¢ Double-check your grades and credit hours before calculating.<br>
            â€¢ Use the calculator to plan course loads and improve performance.<br>
            â€¢ Remember: the official GPA is the one issued by the university system.
          </div>
        </div>

        <div class="siteFooter">
          Built by <strong>Homam Shaaban</strong>. This is a student-built guidance tool and not an official university system.<br>
          Reference: AOU grading scale (Aâ€“F) mapped to a 4.0 scale (as used in this tool).<br>
          <a href="#top" onclick="window.scrollTo({top:0,behavior:'smooth'});return false;">Back to top</a>
        </div>
      </div>
    </section>

    <div class="siteFooter">
      Â© <span id="year"></span> AOU GPA Calculator â€” All rights reserved.
    </div>
  </div>

<script>
/* =========================
   AOU Scale (Score -> Letter/Points)
========================= */
function aouFromScore(score){
  if (!Number.isFinite(score)) return { letter: "â€”", points: null };
  if (score >= 90) return { letter: "A", points: 4.0 };
  if (score >= 82) return { letter: "B+", points: 3.5 };
  if (score >= 74) return { letter: "B", points: 3.0 };
  if (score >= 66) return { letter: "C+", points: 2.5 };
  if (score >= 58) return { letter: "C", points: 2.0 };
  if (score >= 50) return { letter: "D", points: 1.0 };
  return { letter: "F", points: 0.0 };
}
function clampScore(v){
  if (!Number.isFinite(v)) return null;
  if (v < 0) return 0;
  if (v > 100) return 100;
  return v;
}
function safeUpper(s){ return String(s || "").trim().toUpperCase(); }
function $(id){ return document.getElementById(id); }

/* =========================
   i18n (Calculator UI)
========================= */
const i18n = {
  en: {
    appTitle: "AOU GPA Calculator",
    appSub: "Calculate semester GPA and estimate cumulative GPA on a 4.0 scale (AOU policy)",
    scaleChip: "Scale: 4.0",
    copyLink: "Copy link",
    notice: "Notice: This is a student guidance tool and not an official university system.",

    tabCalc: "Calculator",
    tabInfo: "Information",

    calcTitle: "GPA Calculator",
    calcDesc: "Enter grades (0â€“100) and credit hours. Previous GPA/hours are optional to estimate cumulative GPA.",

    prevGpa: "Previous cumulative GPA (0â€“4) (optional)",
    prevHours: "Total completed credit hours (optional)",

    rule: "Retake Rule: If you enter the same Course Code multiple times, only the latest attempt is counted (previous attempts become Replaced).",

    colAction: "Action",
    colStatus: "Status",
    colPoints: "GPA Points",
    colHours: "Credit Hours",
    colScore: "Grade (0â€“100)",
    colCode: "Course Code",

    addCourse: "Add Course",
    calculate: "Calculate",
    reset: "Reset",
    exportJson: "Export (JSON)",
    importJson: "Import (JSON)",
    print: "Print",

    semCaption: "Semester GPA (for entered courses).",
    cumCaption: "Estimated cumulative GPA (if you entered previous GPA & hours).",

    statusCounted: "Counted",
    statusReplaced: "Replaced",
    del: "Delete",

    placeholderCode: "e.g., ITC101",
    placeholderScore: "e.g., 88.5",
    placeholderHours: "e.g., 3",

    toastLink: "Link copied âœ…",
    toastJson: "JSON exported âœ…",
    toastImported: "Imported âœ…",
    toastReset: "Reset âœ…",

    alertInvalidRow: "Please enter Course Code, Credit Hours, and Grade (0â€“100) for each course.",
    tipDecimal: "Tip: You can enter decimals (e.g., 88.5). Letter & points are calculated automatically using AOU scale."
  },
  ar: {
    appTitle: "Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ù…Ø¹Ø¯Ù„ - Ø§Ù„Ø¬Ø§Ù…Ø¹Ø© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„Ù…ÙØªÙˆØ­Ø©",
    appSub: "Ø§Ø­Ø³Ø¨ Ù…Ø¹Ø¯Ù„ Ø§Ù„ÙØµÙ„ ÙˆØªÙˆÙ‚Ø¹ Ø§Ù„Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ±Ø§ÙƒÙ…ÙŠ Ø¹Ù„Ù‰ Ù…Ù‚ÙŠØ§Ø³ 4.0 (Ø­Ø³Ø¨ Ø³Ù„Ù… AOU)",
    scaleChip: "Scale: 4.0",
    copyLink: "Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·",
    notice: "ØªÙ†Ø¨ÙŠÙ‡: Ø£Ø¯Ø§Ø© Ø·Ù„Ø§Ø¨ÙŠØ© Ù„Ù„Ø¥Ø±Ø´Ø§Ø¯ ÙÙ‚Ø· ÙˆÙ„ÙŠØ³Øª Ù†Ø¸Ø§Ù…Ù‹Ø§ Ø±Ø³Ù…ÙŠÙ‹Ø§ Ù„Ù„Ø¬Ø§Ù…Ø¹Ø©.",

    tabCalc: "Ø§Ù„Ø­Ø§Ø³Ø¨Ø©",
    tabInfo: "Ù…Ø¹Ù„ÙˆÙ…Ø§Øª",

    calcTitle: "Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ù…Ø¹Ø¯Ù„",
    calcDesc: "Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¯Ø±Ø¬Ø© (0â€“100) ÙˆØ§Ù„Ø³Ø§Ø¹Ø§Øª. Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø³Ø§Ø¨Ù‚ ÙˆØ§Ù„Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© Ø§Ø®ØªÙŠØ§Ø±ÙŠ Ù„ØªÙ‚Ø¯ÙŠØ± Ø§Ù„ØªØ±Ø§ÙƒÙ…ÙŠ.",

    prevGpa: "Ø§Ù„Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ±Ø§ÙƒÙ…ÙŠ Ø§Ù„Ø³Ø§Ø¨Ù‚ (0â€“4) (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)",
    prevHours: "Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ù…Ù†Ø¬Ø²Ø© Ø³Ø§Ø¨Ù‚Ù‹Ø§ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)",

    rule: "Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¥Ø¹Ø§Ø¯Ø©: Ø¥Ø°Ø§ Ø£Ø¯Ø®Ù„Øª Ù†ÙØ³ ÙƒÙˆØ¯ Ø§Ù„Ù…Ù‚Ø±Ø± Ø£ÙƒØ«Ø± Ù…Ù† Ù…Ø±Ø©ØŒ ÙŠØªÙ… Ø§Ø­ØªØ³Ø§Ø¨ Ø¢Ø®Ø± Ù…Ø­Ø§ÙˆÙ„Ø© ÙÙ‚Ø· (ÙˆØªØµØ¨Ø­ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© Ù…Ø³ØªØ¨Ø¯Ù„Ø©).",

    colAction: "Ø¥Ø¬Ø±Ø§Ø¡",
    colStatus: "Ø­Ø§Ù„Ø©",
    colPoints: "Ù†Ù‚Ø§Ø·",
    colHours: "Ø³Ø§Ø¹Ø§Øª",
    colScore: "Ø§Ù„Ø¯Ø±Ø¬Ø© (0â€“100)",
    colCode: "ÙƒÙˆØ¯ Ø§Ù„Ù…Ù‚Ø±Ø±",

    addCourse: "Ø¥Ø¶Ø§ÙØ© Ù…Ù‚Ø±Ø±",
    calculate: "Ø§Ø­Ø³Ø¨",
    reset: "Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø·",
    exportJson: "ØªØµØ¯ÙŠØ± (JSON)",
    importJson: "Ø§Ø³ØªÙŠØ±Ø§Ø¯ (JSON)",
    print: "Ø·Ø¨Ø§Ø¹Ø©",

    semCaption: "Ù…Ø¹Ø¯Ù„ Ø§Ù„ÙØµÙ„ Ù„Ù„Ù…Ù‚Ø±Ø±Ø§Øª Ø§Ù„Ù…ÙØ¯Ø®Ù„Ø©.",
    cumCaption: "ØªÙ‚Ø¯ÙŠØ± Ø§Ù„Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ±Ø§ÙƒÙ…ÙŠ (Ø¥Ø°Ø§ Ø£Ø¯Ø®Ù„Øª Ø§Ù„Ù…Ø¹Ø¯Ù„ ÙˆØ§Ù„Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©).",

    statusCounted: "Ù…ÙØ­ØªØ³Ø¨",
    statusReplaced: "Ù…Ø³ØªØ¨Ø¯Ù„",
    del: "Ø­Ø°Ù",

    placeholderCode: "Ù…Ø«Ø§Ù„: ITC101",
    placeholderScore: "Ù…Ø«Ø§Ù„: 88.5",
    placeholderHours: "Ù…Ø«Ø§Ù„: 3",

    toastLink: "ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø· âœ…",
    toastJson: "ØªÙ… ØªØµØ¯ÙŠØ± JSON âœ…",
    toastImported: "ØªÙ… Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯ âœ…",
    toastReset: "ØªÙ…Øª Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¶Ø¨Ø· âœ…",

    alertInvalidRow: "ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙˆØ¯ Ø§Ù„Ù…Ù‚Ø±Ø± + Ø§Ù„Ø³Ø§Ø¹Ø§Øª + Ø§Ù„Ø¯Ø±Ø¬Ø© (0â€“100) Ù„ÙƒÙ„ Ù…Ù‚Ø±Ø±.",
    tipDecimal: "Ù…Ù„Ø§Ø­Ø¸Ø©: ØªÙ‚Ø¯Ø± ØªØ¯Ø®Ù„ ÙÙˆØ§ØµÙ„ (Ù…Ø«Ù„ 88.5). Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ù„Ù„Ø­Ø±Ù ÙˆØ§Ù„Ù†Ù‚Ø§Ø· ÙŠØªÙ… ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ø­Ø³Ø¨ Ø³Ù„Ù… AOU."
  }
};

const STORAGE_KEY = "aou_gpa_v3";
const THEME_KEY = "site_theme";
const LANG_KEY = "site_lang";
let LANG = "en";

function t(key){
  return (i18n[LANG] && i18n[LANG][key]) ? i18n[LANG][key] : key;
}

function toast(msg){
  const el = $("toast");
  el.textContent = msg;
  el.style.display = "block";
  clearTimeout(window.__toastTimer);
  window.__toastTimer = setTimeout(()=>{ el.style.display = "none"; }, 1400);
}

/* =========================
   Theme
========================= */
function applyTheme(theme){
  document.documentElement.setAttribute("data-theme", theme);
  localStorage.setItem(THEME_KEY, theme);
  updateThemeButton();
}
function getPreferredTheme(){
  const saved = localStorage.getItem(THEME_KEY);
  if(saved === "light" || saved === "dark") return saved;
  return (window.matchMedia && window.matchMedia("(prefers-color-scheme: light)").matches) ? "light" : "dark";
}
function updateThemeButton(){
  const theme = document.documentElement.getAttribute("data-theme") || "dark";
  $("btnTheme").textContent = (theme === "dark") ? "ğŸŒ™" : "â˜€ï¸";
}

/* =========================
   Language (auto + save)
========================= */
function detectLang(){
  const saved = localStorage.getItem(LANG_KEY);
  if(saved === "ar" || saved === "en") return saved;
  const nav = (navigator.language || "en").toLowerCase();
  return nav.startsWith("ar") ? "ar" : "en";
}

function setLang(lang){
  LANG = lang;
  localStorage.setItem(LANG_KEY, lang);

  document.documentElement.lang = lang;
  document.documentElement.dir = (lang === "ar") ? "rtl" : "ltr";

  document.querySelectorAll("[data-i18n]").forEach(el=>{
    const key = el.getAttribute("data-i18n");
    el.textContent = t(key);
  });

  updateAllRowPlaceholders();
  compute(false);

  // âœ… sync info with site lang
  setInfoLang(lang, true);
  saveState();
}

/* =========================
   Rows UI
========================= */
function rowTemplate(data = {}){
  const code = data.code ?? "";
  const score = (data.score ?? "") === "" ? "" : String(data.score);
  const hours = (data.hours ?? "") === "" ? "" : String(data.hours);

  const div = document.createElement("div");
  div.className = "trow";
  div.innerHTML = `
    <div class="cell">
      <button class="btn" style="border-color: rgba(255,91,91,.45); background: rgba(255,91,91,.10);" type="button" data-act="del">${t("del")}</button>
    </div>

    <div class="cell hide-sm">
      <span class="badge warn" data-act="status">${t("statusCounted")}</span>
    </div>

    <div class="cell hide-md">
      <span class="badge" data-act="points">â€”</span>
      <div class="mini" style="margin-top:4px" data-act="letter">â€”</div>
    </div>

    <div class="cell hide-md">
      <input data-act="hours" inputmode="numeric" type="number" min="0" step="1" placeholder="${t("placeholderHours")}" value="${hours}">
    </div>

    <div class="cell">
      <input data-act="score" inputmode="decimal" type="number" min="0" max="100" step="0.01" placeholder="${t("placeholderScore")}" value="${score}">
    </div>

    <div class="cell">
      <input data-act="code" class="codeInput" type="text" placeholder="${t("placeholderCode")}" value="${code}">
    </div>
  `;
  return div;
}

function addRow(data){
  const row = rowTemplate(data);
  $("rows").appendChild(row);
  hookRowEvents(row);
  updateRowComputed(row);
  saveState();
}

function hookRowEvents(row){
  row.querySelector('[data-act="del"]').addEventListener("click", ()=>{
    row.remove();
    if($("rows").children.length === 0) addRow();
    compute(false);
    saveState();
  });

  ["code","score","hours"].forEach(act=>{
    const el = row.querySelector(`[data-act="${act}"]`);
    el.addEventListener("input", ()=>{
      if(act === "score"){
        const n = clampScore(Number(el.value));
        if(Number.isFinite(n)) el.value = String(n);
      }
      updateRowComputed(row);
      saveState();
    });
  });
}

function updateRowComputed(row){
  const scoreEl = row.querySelector('[data-act="score"]');
  const hoursEl = row.querySelector('[data-act="hours"]');

  const score = Number(scoreEl.value);
  const hours = Number(hoursEl.value);

  const gp = aouFromScore(score);
  const pointsBadge = row.querySelector('[data-act="points"]');
  const letterEl = row.querySelector('[data-act="letter"]');

  if(Number.isFinite(score) && scoreEl.value !== ""){
    letterEl.textContent = gp.letter;
  } else {
    letterEl.textContent = "â€”";
  }

  if(Number.isFinite(score) && Number.isFinite(hours) && hoursEl.value !== "" && gp.points !== null){
    pointsBadge.textContent = gp.points.toFixed(1);
  } else if (Number.isFinite(score) && gp.points !== null){
    pointsBadge.textContent = gp.points.toFixed(1);
  } else {
    pointsBadge.textContent = "â€”";
  }
}

function updateAllRowPlaceholders(){
  Array.from($("rows").children).forEach(row=>{
    row.querySelector('[data-act="del"]').textContent = t("del");
    row.querySelector('[data-act="hours"]').placeholder = t("placeholderHours");
    row.querySelector('[data-act="score"]').placeholder = t("placeholderScore");
    row.querySelector('[data-act="code"]').placeholder = t("placeholderCode");
  });
}

/* =========================
   Retake rule + compute
========================= */
function extractRows(){
  const rows = Array.from($("rows").children);
  const parsed = rows.map((row, idx)=>{
    const code = safeUpper(row.querySelector('[data-act="code"]').value);
    const scoreStr = row.querySelector('[data-act="score"]').value;
    const hoursStr = row.querySelector('[data-act="hours"]').value;

    const score = (scoreStr === "") ? NaN : Number(scoreStr);
    const hours = (hoursStr === "") ? NaN : Number(hoursStr);

    return { idx, row, code, score, hours };
  });

  const lastIndex = new Map();
  parsed.forEach(p=>{ if(p.code) lastIndex.set(p.code, p.idx); });

  parsed.forEach(p=>{
    const statusEl = p.row.querySelector('[data-act="status"]');
    if(!p.code){
      statusEl.textContent = t("statusCounted");
      statusEl.classList.remove("ok");
      statusEl.classList.add("warn");
      return;
    }
    const isLast = lastIndex.get(p.code) === p.idx;
    statusEl.textContent = isLast ? t("statusCounted") : t("statusReplaced");
    statusEl.classList.toggle("ok", isLast);
    statusEl.classList.toggle("warn", !isLast);
  });

  return parsed.filter(p=>{
    if(!p.code) return true;
    return lastIndex.get(p.code) === p.idx;
  });
}

function validateRow(p){
  if(!p.code) return false;
  if(!Number.isFinite(p.hours) || p.hours <= 0) return false;
  if(!Number.isFinite(p.score)) return false;
  const s = clampScore(p.score);
  if(s === null) return false;
  return true;
}

function compute(showAlerts = true){
  const counted = extractRows();
  let totalPoints = 0;
  let totalHours = 0;

  for(const p of counted){
    if(!p.code) continue;
    if(!validateRow(p)){
      if(showAlerts) alert(t("alertInvalidRow"));
      return { ok:false };
    }
    const sc = clampScore(p.score);
    const gp = aouFromScore(sc);
    totalHours += p.hours;
    totalPoints += (gp.points * p.hours);
  }

  const sem = (totalHours > 0) ? (totalPoints / totalHours) : 0;
  $("semGpa").textContent = sem.toFixed(2);
  $("semCaption").textContent = t("semCaption");

  const prevGpa = Number($("prevGpa").value);
  const prevHours = Number($("prevHours").value);

  let cum = sem;
  if(Number.isFinite(prevGpa) && Number.isFinite(prevHours) && prevHours > 0){
    const prevPoints = prevGpa * prevHours;
    const finalHours = prevHours + totalHours;
    const finalPoints = prevPoints + totalPoints;
    cum = (finalHours > 0) ? (finalPoints / finalHours) : 0;
  }
  $("cumGpa").textContent = cum.toFixed(2);
  $("cumCaption").textContent = t("cumCaption");

  return { ok:true, sem, cum };
}

/* =========================
   Save / Restore
========================= */
function rowsData(){
  return Array.from($("rows").children).map(row=>({
    code: row.querySelector('[data-act="code"]').value,
    score: row.querySelector('[data-act="score"]').value === "" ? "" : Number(row.querySelector('[data-act="score"]').value),
    hours: row.querySelector('[data-act="hours"]').value === "" ? "" : Number(row.querySelector('[data-act="hours"]').value),
  }));
}

function saveState(){
  const state = {
    lang: LANG,
    theme: document.documentElement.getAttribute("data-theme") || "dark",
    prevGpa: $("prevGpa").value,
    prevHours: $("prevHours").value,
    rows: rowsData(),
    activeMainTab: localStorage.getItem("main_tab") || "calc",
    infoLang: localStorage.getItem("info_lang") || LANG
  };
  localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
}

function restoreState(){
  try{
    const raw = localStorage.getItem(STORAGE_KEY);
    if(!raw) return;
    const st = JSON.parse(raw);

    if(st.theme === "light" || st.theme === "dark") applyTheme(st.theme);

    if(typeof st.prevGpa === "string") $("prevGpa").value = st.prevGpa;
    if(typeof st.prevHours === "string") $("prevHours").value = st.prevHours;

    $("rows").innerHTML = "";
    (st.rows || []).forEach(r=> addRow(r));
    if($("rows").children.length === 0) addRow();

    showMainTab(st.activeMainTab === "info" ? "info" : "calc");

    // keep pills choice if user changed it before
    if(st.infoLang === "ar" || st.infoLang === "en"){
      setInfoLang(st.infoLang, false);
    }

  }catch{}
}

/* =========================
   Export / Import
========================= */
function downloadText(filename, text){
  const blob = new Blob([text], {type: "application/json"});
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url;
  a.download = filename;
  document.body.appendChild(a);
  a.click();
  a.remove();
  URL.revokeObjectURL(url);
}

function exportJson(){
  const payload = {
    version: 3,
    timestamp: new Date().toISOString(),
    data: {
      prevGpa: $("prevGpa").value,
      prevHours: $("prevHours").value,
      rows: rowsData()
    }
  };
  downloadText("aou-gpa-data.json", JSON.stringify(payload, null, 2));
  toast(t("toastJson"));
}

function importJsonFromFile(file){
  const reader = new FileReader();
  reader.onload = () => {
    try{
      const obj = JSON.parse(String(reader.result || ""));
      if(!obj || !obj.data) throw new Error("bad");

      $("prevGpa").value = obj.data.prevGpa ?? "";
      $("prevHours").value = obj.data.prevHours ?? "";

      $("rows").innerHTML = "";
      (obj.data.rows || []).forEach(r=> addRow(r));
      if($("rows").children.length === 0) addRow();

      toast(t("toastImported"));
      saveState();
      compute(false);
    }catch{
      alert("Invalid JSON file");
    }
  };
  reader.readAsText(file);
}

/* =========================
   Copy link
========================= */
async function copyText(text){
  try{
    await navigator.clipboard.writeText(text);
    toast(t("toastLink"));
  }catch{
    const ta = document.createElement("textarea");
    ta.value = text;
    document.body.appendChild(ta);
    ta.select();
    document.execCommand("copy");
    ta.remove();
    toast(t("toastLink"));
  }
}

/* =========================
   Main Tabs
========================= */
function showMainTab(which){
  const isCalc = which === "calc";
  $("panelCalc").style.display = isCalc ? "block" : "none";
  $("panelInfo").style.display = isCalc ? "none" : "block";
  $("tabCalc").classList.toggle("active", isCalc);
  $("tabInfo").classList.toggle("active", !isCalc);

  // âœ… when opening Information, follow current site language unless user already chose via pills
  if(!isCalc){
    const saved = localStorage.getItem("info_lang");
    if(saved !== "ar" && saved !== "en"){
      setInfoLang(LANG, true);
    }
  }

  localStorage.setItem("main_tab", which);
}

/* =========================
   Info Language (like screenshot tabs)
   - forceSync=true: store info_lang = lang
========================= */
function setInfoLang(lang, forceSync){
  if(forceSync){
    localStorage.setItem("info_lang", lang);
  }else{
    // store only when user clicks pills
    localStorage.setItem("info_lang", lang);
  }

  $("infoEN").classList.toggle("active", lang === "en");
  $("infoAR").classList.toggle("active", lang === "ar");

  if(lang === "en"){
    $("infoTitle").textContent = "GPA Calculator Information";
    $("aboutTitle").textContent = "About This Calculator";
    $("aboutText").textContent =
      "This GPA calculator is designed for Arab Open University (AOU) students. It helps you calculate your semester GPA and estimate your cumulative GPA using the standard 4.0 scale based on AOUâ€™s grading policy.";
    $("scaleTitle").textContent = "Grading Scale";
    $("gsCol1").textContent = "Letter Grade";
    $("gsCol2").textContent = "Grade Points";
    $("gsCol3").textContent = "Percentage";
    $("faqTitle").textContent = "Frequently Asked Questions";
    $("q1").textContent = "How do I use this calculator?";
    $("a1").innerHTML =
      "1) (Optional) Enter your previous cumulative GPA and total completed hours.<br>" +
      "2) Add your current semester courses.<br>" +
      "3) Enter Course Code, Grade (0â€“100), and Credit Hours.<br>" +
      "4) Click â€œCalculateâ€ to see semester GPA and estimated cumulative GPA.";
    $("q2").textContent = "What if I donâ€™t have a previous GPA?";
    $("a2").textContent = "Leave previous GPA and hours empty (or 0). The calculator will still compute your semester GPA.";
    $("q3").textContent = "Can I calculate for multiple semesters?";
    $("a3").textContent = "Yes. Enter your latest cumulative GPA and total completed hours from all previous semesters, then add your new semester courses to estimate the updated cumulative GPA.";
    $("q4").textContent = "Is my data saved or shared?";
    $("a4").textContent = "All calculations run locally in your browser. The app can optionally save your last inputs using localStorage on your device only.";
    $("q5").textContent = "What is the difference between Semester GPA and Cumulative GPA?";
    $("a5").textContent = "Semester GPA is calculated from the courses you entered (current term). Cumulative GPA estimates your overall GPA when combining previous GPA/hours with this termâ€™s results.";
    $("tipsTitle").textContent = "Tips for Success";
    $("tipsBody").innerHTML =
      "â€¢ Double-check your grades and credit hours before calculating.<br>" +
      "â€¢ Use the calculator to plan course loads and improve performance.<br>" +
      "â€¢ Remember: the official GPA is the one issued by the university system.";
  } else {
    $("infoTitle").textContent = "Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¹Ù† Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ù…Ø¹Ø¯Ù„";
    $("aboutTitle").textContent = "Ø¹Ù† Ù‡Ø°Ù‡ Ø§Ù„Ø­Ø§Ø³Ø¨Ø©";
    $("aboutText").textContent =
      "Ù‡Ø°Ù‡ Ø§Ù„Ø­Ø§Ø³Ø¨Ø© Ù…Ø®ØµØµØ© Ù„Ø·Ù„Ø§Ø¨ Ø§Ù„Ø¬Ø§Ù…Ø¹Ø© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„Ù…ÙØªÙˆØ­Ø© (AOU). ØªØ³Ø§Ø¹Ø¯Ùƒ Ø¹Ù„Ù‰ Ø­Ø³Ø§Ø¨ Ù…Ø¹Ø¯Ù„ Ø§Ù„ÙØµÙ„ ÙˆØªÙ‚Ø¯ÙŠØ± Ø§Ù„Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ±Ø§ÙƒÙ…ÙŠ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…Ù‚ÙŠØ§Ø³ 4.0 ÙˆÙÙ‚ Ø³Ù„Ù… Ø§Ù„Ø¯Ø±Ø¬Ø§Øª.";
    $("scaleTitle").textContent = "Ø³Ù„Ù… Ø§Ù„Ø¯Ø±Ø¬Ø§Øª";
    $("gsCol1").textContent = "Ø§Ù„ØªÙ‚Ø¯ÙŠØ±";
    $("gsCol2").textContent = "Ø§Ù„Ù†Ù‚Ø§Ø·";
    $("gsCol3").textContent = "Ø§Ù„Ù†Ø³Ø¨Ø©";
    $("faqTitle").textContent = "Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©";
    $("q1").textContent = "ÙƒÙŠÙ Ø£Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ø³Ø¨Ø©ØŸ";
    $("a1").innerHTML =
      "1) (Ø§Ø®ØªÙŠØ§Ø±ÙŠ) Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ±Ø§ÙƒÙ…ÙŠ Ø§Ù„Ø³Ø§Ø¨Ù‚ ÙˆØ§Ù„Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ù…Ù†Ø¬Ø²Ø©.<br>" +
      "2) Ø£Ø¶Ù Ù…Ù‚Ø±Ø±Ø§Øª Ø§Ù„ÙØµÙ„ Ø§Ù„Ø­Ø§Ù„ÙŠ.<br>" +
      "3) Ø£Ø¯Ø®Ù„ ÙƒÙˆØ¯ Ø§Ù„Ù…Ù‚Ø±Ø± ÙˆØ§Ù„Ø¯Ø±Ø¬Ø© (0â€“100) ÙˆØ§Ù„Ø³Ø§Ø¹Ø§Øª.<br>" +
      "4) Ø§Ø¶ØºØ· â€œØ§Ø­Ø³Ø¨â€ Ù„Ø¹Ø±Ø¶ Ù…Ø¹Ø¯Ù„ Ø§Ù„ÙØµÙ„ ÙˆØªÙ‚Ø¯ÙŠØ± Ø§Ù„Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ±Ø§ÙƒÙ…ÙŠ.";
    $("q2").textContent = "Ù…Ø§Ø°Ø§ Ù„Ùˆ Ù…Ø§ Ø¹Ù†Ø¯ÙŠ Ù…Ø¹Ø¯Ù„ Ø³Ø§Ø¨Ù‚ØŸ";
    $("a2").textContent = "Ø§ØªØ±Ùƒ Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø³Ø§Ø¨Ù‚ ÙˆØ§Ù„Ø³Ø§Ø¹Ø§Øª ÙØ§Ø±ØºØ© (Ø£Ùˆ 0). Ø³ØªØ³ØªØ·ÙŠØ¹ Ø­Ø³Ø§Ø¨ Ù…Ø¹Ø¯Ù„ Ø§Ù„ÙØµÙ„ ÙÙ‚Ø·.";
    $("q3").textContent = "Ù‡Ù„ Ø£Ù‚Ø¯Ø± Ø£Ø­Ø³Ø¨ Ù„Ø£ÙƒØ«Ø± Ù…Ù† ÙØµÙ„ØŸ";
    $("a3").textContent = "Ù†Ø¹Ù…. Ø£Ø¯Ø®Ù„ Ø¢Ø®Ø± Ù…Ø¹Ø¯Ù„ ØªØ±Ø§ÙƒÙ…ÙŠ ÙˆØ³Ø§Ø¹Ø§ØªÙƒ Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙØµÙˆÙ„ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©ØŒ Ø«Ù… Ø£Ø¶Ù Ù…Ù‚Ø±Ø±Ø§Øª Ø§Ù„ÙØµÙ„ Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ù„ØªÙ‚Ø¯ÙŠØ± Ø§Ù„ØªØ±Ø§ÙƒÙ…ÙŠ Ø¨Ø¹Ø¯Ù‡.";
    $("q4").textContent = "Ù‡Ù„ ÙŠØªÙ… Ø­ÙØ¸ Ø£Ùˆ Ù…Ø´Ø§Ø±ÙƒØ© Ø¨ÙŠØ§Ù†Ø§ØªÙŠØŸ";
    $("a4").textContent = "ÙƒÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª ØªØªÙ… Ø¯Ø§Ø®Ù„ Ù…ØªØµÙØ­Ùƒ. ÙˆÙŠÙ…ÙƒÙ† Ø­ÙØ¸ Ø¢Ø®Ø± Ø¥Ø¯Ø®Ø§Ù„Ø§ØªÙƒ Ù…Ø­Ù„ÙŠÙ‹Ø§ Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø²Ùƒ Ø¹Ø¨Ø± localStorage ÙÙ‚Ø·.";
    $("q5").textContent = "Ù…Ø§ Ø§Ù„ÙØ±Ù‚ Ø¨ÙŠÙ† Ù…Ø¹Ø¯Ù„ Ø§Ù„ÙØµÙ„ ÙˆØ§Ù„Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ±Ø§ÙƒÙ…ÙŠØŸ";
    $("a5").textContent = "Ù…Ø¹Ø¯Ù„ Ø§Ù„ÙØµÙ„ ÙŠÙØ­Ø³Ø¨ Ù…Ù† Ù…Ù‚Ø±Ø±Ø§ØªÙƒ Ø§Ù„Ù…ÙØ¯Ø®Ù„Ø© (Ø§Ù„ÙØµÙ„ Ø§Ù„Ø­Ø§Ù„ÙŠ). Ø§Ù„ØªØ±Ø§ÙƒÙ…ÙŠ ØªÙ‚Ø¯ÙŠØ± Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ù…Ø¹Ø¯Ù„Ùƒ Ø¹Ù†Ø¯ Ø¯Ù…Ø¬ Ø§Ù„Ø³Ø§Ø¨Ù‚ Ù…Ø¹ Ù†ØªØ§Ø¦Ø¬ Ù‡Ø°Ø§ Ø§Ù„ÙØµÙ„.";
    $("tipsTitle").textContent = "Ù†ØµØ§Ø¦Ø­";
    $("tipsBody").innerHTML =
      "â€¢ ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø¯Ø±Ø¬Ø§Øª ÙˆØ§Ù„Ø³Ø§Ø¹Ø§Øª Ù‚Ø¨Ù„ Ø§Ù„Ø­Ø³Ø§Ø¨.<br>" +
      "â€¢ Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ø³Ø¨Ø© Ù„ØªØ®Ø·ÙŠØ· Ø§Ù„Ø¹Ø¨Ø¡ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ ÙˆØªØ­Ø³ÙŠÙ† Ø§Ù„Ø£Ø¯Ø§Ø¡.<br>" +
      "â€¢ ØªØ°ÙƒÙ‘Ø±: Ø§Ù„Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø±Ø³Ù…ÙŠ Ù‡Ùˆ Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ù†Ø¸Ø§Ù… Ø§Ù„Ø¬Ø§Ù…Ø¹Ø©.";
  }
}

/* =========================
   Init
========================= */
function init(){
  $("year").textContent = String(new Date().getFullYear());

  applyTheme(getPreferredTheme());

  // set lang (auto)
  setLang(detectLang());

  // buttons
  $("btnAR").addEventListener("click", ()=> { setLang("ar"); });
  $("btnEN").addEventListener("click", ()=> { setLang("en"); });

  $("btnTheme").addEventListener("click", ()=>{
    const cur = document.documentElement.getAttribute("data-theme") || "dark";
    applyTheme(cur === "dark" ? "light" : "dark");
    saveState();
  });

  $("btnCopyLink").addEventListener("click", ()=>{
    copyText(location.href);
  });

  $("tabCalc").addEventListener("click", ()=> showMainTab("calc"));
  $("tabInfo").addEventListener("click", ()=> showMainTab("info"));

  // Info pills (manual override)
  $("infoEN").addEventListener("click", ()=> setInfoLang("en", false));
  $("infoAR").addEventListener("click", ()=> setInfoLang("ar", false));

  $("btnAdd").addEventListener("click", ()=> addRow());
  $("btnCalc").addEventListener("click", ()=> compute(true));
  $("btnReset").addEventListener("click", ()=>{
    $("prevGpa").value = "";
    $("prevHours").value = "";
    $("rows").innerHTML = "";
    addRow();
    $("semGpa").textContent = "0.00";
    $("cumGpa").textContent = "0.00";
    toast(t("toastReset"));

    // reset info language choice to follow site
    localStorage.removeItem("info_lang");

    saveState();
  });

  $("btnPrint").addEventListener("click", ()=> window.print());

  $("btnExport").addEventListener("click", exportJson);
  $("btnImport").addEventListener("click", ()=> $("importFile").click());
  $("importFile").addEventListener("change", (e)=>{
    const file = e.target.files && e.target.files[0];
    if(file) importJsonFromFile(file);
    e.target.value = "";
  });

  $("prevGpa").addEventListener("input", ()=> { compute(false); saveState(); });
  $("prevHours").addEventListener("input", ()=> { compute(false); saveState(); });

  if($("rows").children.length === 0) addRow();

  restoreState();

  // after restore, make sure info follows site unless user set it
  const savedInfo = localStorage.getItem("info_lang");
  if(savedInfo === "ar" || savedInfo === "en"){
    setInfoLang(savedInfo, false);
  }else{
    setInfoLang(LANG, true);
    // remove so it can keep following site in future unless user clicks pills
    localStorage.removeItem("info_lang");
  }

  compute(false);
}

document.addEventListener("DOMContentLoaded", init);
</script>
</body>
</html>
